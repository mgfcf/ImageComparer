{% extends "mainframe.jinja2" %} {% block content %}
<div
    style="
        overflow-y: scroll;
        position: fixed;
        width: 100%;
        height: 100%;
        display: none;
        background-color: rgba(0, 0, 0, 0.808);
    "
    onclick="delarge()"
>
    <img
        id="big-image"
        style="max-height: 100%; height: 100%"
        src=""
        alt=""
        onclick="delarge()"
    />
    <button onclick="delete_image()" style="height: 100%">Delete</button>
</div>
{% for group in groups %}
<div class="image-group">
    {% for image in group.images %}
    <img
        class="image-view"
        src="{{ url_for('images', path='/' + image.url) }}"
        alt=""
        loading="lazy"
        onclick="enlarge(this)"
    />
    {% endfor %}
</div>
<hr />
{% endfor %} {% endblock content %} {% block style %}
<style>
    body {
        background-color: rgb(53, 35, 75);
        max-width: 100%;
    }

    input {
        width: 50%;
    }

    .image-view {
        height: 300px;
        width: auto;
    }

    .image-container {
        display: flex;
        flex-wrap: wrap;
    }
</style>
{% endblock style %} {% block script %}
<script>
    function enlarge(image) {
        var bigImg = document.getElementById("big-image");
        bigImg.setAttribute("src", image.getAttribute("src"));
        bigImg.parentNode.style.display = "Block";
    }
    function delarge() {
        var bigImg = document.getElementById("big-image");
        bigImg.parentNode.style.display = "None";
    }
    function delete_image() {
        var bigImg = document.getElementById("big-image");
        var src = bigImg.getAttribute("src");
        var search = src.split("/")[src.split("/").length - 1].split("\\")[
            src.split("\\").length - 1
        ];
        console.log(search);
        $.ajax({
            url: "viewing",
            type: "delete",
            dataType: "json",
            data: {
                src: src,
            },
            success: (x) => {
                $("[class='image-view'][src$='" + search + "']")
                    .get(0)
                    .parentNode.remove();
            },
            error: (x) => {
                $("[class='image-view'][src$='" + search + "']")
                    .get(0)
                    .parentNode.remove();
            },
        });
    }
</script>
{% endblock script %}
